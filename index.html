<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ENTITY — Neural Consciousness</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Rajdhani:wght@300;400;600;700&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --void: #020408;
            --deep: #060d18;
            --panel: #0a1628;
            --surface: #0f2040;
            --accent: #00d4ff;
            --accent2: #ff6b35;
            --accent3: #7fff00;
            --warn: #ff3366;
            --text: #a8c8e8;
            --dim: #3a5578;
            --glow: rgba(0, 212, 255, 0.15);
            --glow2: rgba(255, 107, 53, 0.15);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background: var(--void);
            color: var(--text);
            font-family: 'Share Tech Mono', monospace;
            height: 100vh;
            overflow: hidden;
            cursor: crosshair;
        }

        /* Scanline overlay */
        body::before {
            content: '';
            position: fixed;
            inset: 0;
            background: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 2px,
                rgba(0, 0, 0, 0.08) 2px,
                rgba(0, 0, 0, 0.08) 4px
            );
            pointer-events: none;
            z-index: 9999;
        }

        /* Vignette */
        body::after {
            content: '';
            position: fixed;
            inset: 0;
            background: radial-gradient(ellipse at center, transparent 40%, rgba(0,0,0,0.8) 100%);
            pointer-events: none;
            z-index: 9998;
        }

        #app {
            display: grid;
            grid-template-columns: 1fr 380px;
            grid-template-rows: 48px 1fr 200px;
            height: 100vh;
            gap: 2px;
            padding: 2px;
            background: var(--dim);
        }

        /* HEADER */
        #header {
            grid-column: 1 / -1;
            background: var(--deep);
            display: flex;
            align-items: center;
            padding: 0 20px;
            gap: 20px;
            border-bottom: 1px solid var(--dim);
            position: relative;
        }

        #header::after {
            content: '';
            position: absolute;
            bottom: 0; left: 0; right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--accent), transparent);
            animation: scanH 4s linear infinite;
        }

        @keyframes scanH {
            0% { transform: scaleX(0); transform-origin: left; }
            50% { transform: scaleX(1); transform-origin: left; }
            50.01% { transform: scaleX(1); transform-origin: right; }
            100% { transform: scaleX(0); transform-origin: right; }
        }

        .logo {
            font-family: 'Orbitron', sans-serif;
            font-weight: 900;
            font-size: 18px;
            color: var(--accent);
            letter-spacing: 6px;
            text-shadow: 0 0 20px var(--accent), 0 0 40px rgba(0,212,255,0.3);
        }

        .status-bar {
            display: flex;
            gap: 20px;
            margin-left: auto;
            font-size: 11px;
            color: var(--dim);
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .status-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--accent3);
            box-shadow: 0 0 8px var(--accent3);
            animation: pulse 2s ease-in-out infinite;
        }

        .status-dot.warn { background: var(--warn); box-shadow: 0 0 8px var(--warn); }
        .status-dot.off { background: var(--dim); box-shadow: none; animation: none; }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        /* MAIN GRID CANVAS */
        #vision-panel {
            background: var(--deep);
            position: relative;
            overflow: hidden;
        }

        #grid-canvas {
            width: 100%;
            height: 100%;
            display: block;
        }

        #vision-label {
            position: absolute;
            top: 12px;
            left: 12px;
            font-family: 'Orbitron', sans-serif;
            font-size: 9px;
            letter-spacing: 3px;
            color: var(--dim);
        }

        #thought-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(2,4,8,0.95));
            padding: 20px;
            font-family: 'Rajdhani', sans-serif;
            font-size: 16px;
            font-weight: 300;
            color: var(--accent);
            text-shadow: 0 0 20px var(--accent);
            min-height: 80px;
            letter-spacing: 1px;
        }

        #thought-text {
            opacity: 0;
            transition: opacity 0.5s;
        }

        #thought-text.visible { opacity: 1; }

        /* SIDEBAR */
        #sidebar {
            background: var(--deep);
            display: flex;
            flex-direction: column;
            gap: 2px;
            grid-row: 2 / 4;
        }

        .panel {
            background: var(--panel);
            border: 1px solid rgba(0, 212, 255, 0.1);
            padding: 14px;
            position: relative;
        }

        .panel-label {
            font-family: 'Orbitron', sans-serif;
            font-size: 8px;
            letter-spacing: 3px;
            color: var(--dim);
            margin-bottom: 10px;
        }

        /* Camera */
        #cam-panel { flex-shrink: 0; }
        #camera-wrap {
            position: relative;
            width: 100%;
            aspect-ratio: 4/3;
            background: #000;
            overflow: hidden;
        }

        #camera {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transform: scaleX(-1);
            filter: brightness(0.8) contrast(1.2) saturate(0.5);
            mix-blend-mode: screen;
        }

        #camera-hud {
            position: absolute;
            inset: 0;
            border: 1px solid rgba(0, 212, 255, 0.3);
            pointer-events: none;
        }

        #camera-hud::before, #camera-hud::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            border-color: var(--accent);
            border-style: solid;
        }
        #camera-hud::before { top: 8px; left: 8px; border-width: 2px 0 0 2px; }
        #camera-hud::after { bottom: 8px; right: 8px; border-width: 0 2px 2px 0; }

        .cam-scan {
            position: absolute;
            left: 0; right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--accent), transparent);
            opacity: 0.6;
            animation: camScan 3s linear infinite;
        }

        @keyframes camScan {
            0% { top: 0%; }
            100% { top: 100%; }
        }

        #cam-status {
            font-size: 10px;
            color: var(--dim);
            margin-top: 8px;
            text-align: center;
        }

        /* Memory panels */
        #stm-panel { flex: 1; overflow: hidden; display: flex; flex-direction: column; }
        #ltm-panel { height: 160px; display: flex; flex-direction: column; }

        .memory-list {
            flex: 1;
            overflow-y: auto;
            font-size: 10px;
            line-height: 1.6;
            scrollbar-width: thin;
            scrollbar-color: var(--dim) transparent;
        }

        .mem-entry {
            padding: 4px 0;
            border-bottom: 1px solid rgba(255,255,255,0.03);
            opacity: 0;
            transform: translateX(-10px);
            animation: memIn 0.4s ease forwards;
        }

        @keyframes memIn {
            to { opacity: 1; transform: translateX(0); }
        }

        .mem-time { color: var(--dim); font-size: 9px; }
        .mem-content { color: var(--text); }
        .mem-emotion {
            display: inline-block;
            width: 40px;
            height: 3px;
            background: linear-gradient(90deg, var(--warn), var(--accent3));
            vertical-align: middle;
            margin-right: 6px;
            position: relative;
            overflow: hidden;
        }
        .mem-emotion-fill {
            position: absolute;
            left: 0; top: 0; bottom: 0;
            background: var(--accent);
        }

        .ltm-entry {
            padding: 3px 0;
            font-size: 9px;
            color: var(--dim);
            border-bottom: 1px solid rgba(255,255,255,0.02);
        }
        .ltm-entry .ltm-key { color: var(--accent2); }

        /* Chat / Input */
        #chat-panel {
            grid-column: 1;
            background: var(--panel);
            border: 1px solid rgba(0, 212, 255, 0.1);
            display: flex;
            flex-direction: column;
            padding: 14px;
            gap: 10px;
        }

        .panel-label { flex-shrink: 0; }

        #chat-history {
            flex: 1;
            overflow-y: auto;
            font-family: 'Rajdhani', sans-serif;
            font-size: 14px;
            line-height: 1.5;
            scrollbar-width: thin;
            scrollbar-color: var(--dim) transparent;
        }

        .chat-msg {
            padding: 6px 0;
            opacity: 0;
            animation: memIn 0.3s ease forwards;
        }

        .chat-msg.user { color: var(--accent2); }
        .chat-msg.ai { color: var(--accent); }
        .chat-msg.system { color: var(--dim); font-size: 12px; font-style: italic; }

        .chat-msg .speaker {
            font-family: 'Orbitron', sans-serif;
            font-size: 8px;
            letter-spacing: 2px;
            margin-bottom: 2px;
            opacity: 0.6;
        }

        #input-row {
            display: flex;
            gap: 8px;
            flex-shrink: 0;
        }

        #api-key-row {
            display: flex;
            gap: 8px;
            flex-shrink: 0;
        }

        input, textarea {
            background: var(--surface);
            border: 1px solid var(--dim);
            color: var(--text);
            font-family: 'Share Tech Mono', monospace;
            font-size: 12px;
            padding: 8px 12px;
            outline: none;
            transition: border-color 0.3s, box-shadow 0.3s;
            border-radius: 2px;
        }

        input:focus, textarea:focus {
            border-color: var(--accent);
            box-shadow: 0 0 10px rgba(0, 212, 255, 0.2);
        }

        #user-input {
            flex: 1;
            resize: none;
            height: 38px;
            padding: 9px 12px;
        }

        #api-key-input {
            flex: 1;
            font-size: 11px;
        }

        button {
            background: transparent;
            border: 1px solid var(--accent);
            color: var(--accent);
            font-family: 'Orbitron', sans-serif;
            font-size: 9px;
            letter-spacing: 2px;
            padding: 8px 14px;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }

        button:hover {
            background: var(--glow);
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.3);
        }

        button.secondary {
            border-color: var(--dim);
            color: var(--dim);
            font-size: 8px;
        }

        button.secondary:hover {
            border-color: var(--accent2);
            color: var(--accent2);
            background: var(--glow2);
            box-shadow: 0 0 10px rgba(255, 107, 53, 0.2);
        }

        button:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        /* Emotion meter */
        #emotion-bar {
            width: 100%;
            height: 4px;
            background: var(--surface);
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 8px;
        }
        #emotion-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--warn), var(--accent3));
            transition: width 1s ease;
            position: relative;
        }
        #emotion-fill::after {
            content: '';
            position: absolute;
            right: 0; top: 0; bottom: 0;
            width: 4px;
            background: #fff;
            box-shadow: 0 0 8px #fff;
        }

        #emotion-label {
            font-size: 9px;
            color: var(--dim);
            margin-bottom: 10px;
        }

        /* Glitch effect on ENTITY name */
        @keyframes glitch {
            0%, 100% { text-shadow: 0 0 20px var(--accent), 0 0 40px rgba(0,212,255,0.3); transform: none; }
            92% { text-shadow: 0 0 20px var(--accent), 0 0 40px rgba(0,212,255,0.3); transform: none; }
            93% { text-shadow: -2px 0 var(--warn), 2px 0 var(--accent2); transform: translateX(2px); }
            94% { text-shadow: 2px 0 var(--warn), -2px 0 var(--accent3); transform: translateX(-2px); }
            95% { text-shadow: 0 0 20px var(--accent), 0 0 40px rgba(0,212,255,0.3); transform: none; }
        }

        .logo { animation: glitch 8s ease-in-out infinite; }

        #typing-indicator {
            display: none;
            color: var(--dim);
            font-size: 11px;
            padding: 4px 0;
        }
        #typing-indicator.active { display: block; animation: blink 1s step-end infinite; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

        .api-notice {
            font-size: 9px;
            color: var(--dim);
            margin-top: 4px;
        }

        .api-notice a {
            color: var(--accent2);
            text-decoration: none;
        }

        #neural-stats {
            display: flex;
            gap: 12px;
            font-size: 9px;
            color: var(--dim);
            margin-top: 6px;
        }

        .stat-val { color: var(--accent); }
    </style>
</head>
<body>
<div id="app">
    <!-- HEADER -->
    <div id="header">
        <div class="logo">ENTITY</div>
        <div style="font-size:10px; color: var(--dim); letter-spacing: 2px;">NEURAL CONSCIOUSNESS v0.1</div>
        <div class="status-bar">
            <div class="status-item">
                <div class="status-dot" id="dot-vision"></div>
                <span id="label-vision">VISION</span>
            </div>
            <div class="status-item">
                <div class="status-dot" id="dot-memory"></div>
                <span>MEMORY</span>
            </div>
            <div class="status-item">
                <div class="status-dot" id="dot-llm"></div>
                <span id="label-llm">COGNITION</span>
            </div>
            <div class="status-item" id="clock-item">
                <span id="clock">--:--:--</span>
            </div>
        </div>
    </div>

    <!-- MAIN VISION PANEL -->
    <div id="vision-panel">
        <div id="vision-label">VISUAL CORTEX — 100×100 ATTENTION MAP</div>
        <canvas id="grid-canvas"></canvas>
        <div id="thought-overlay">
            <div id="thought-text">Initializing consciousness...</div>
        </div>
    </div>

    <!-- CHAT PANEL -->
    <div id="chat-panel">
        <div class="panel-label">COMMUNICATION INTERFACE</div>
        <div id="chat-history">
            <div class="chat-msg system">
                <div>— ENTITY ONLINE — awaiting neural key —</div>
            </div>
        </div>
        <div id="typing-indicator">ENTITY is processing ████</div>
        <div id="input-row">
            <textarea id="user-input" placeholder="Speak to the entity..." disabled></textarea>
            <button id="send-btn" disabled>SEND</button>
        </div>
        <div id="api-key-row">
            <input type="password" id="api-key-input" placeholder="Paste your Claude API key here..." autocomplete="off">
            <button id="connect-btn">CONNECT</button>
        </div>
        <div class="api-notice">
            Get your key at <a href="https://console.anthropic.com" target="_blank">console.anthropic.com</a> — key never leaves your browser
        </div>
    </div>

    <!-- SIDEBAR -->
    <div id="sidebar">
        <!-- Camera -->
        <div class="panel" id="cam-panel">
            <div class="panel-label">OPTICAL SENSOR</div>
            <div id="camera-wrap">
                <video id="camera" autoplay playsinline muted></video>
                <div id="camera-hud">
                    <div class="cam-scan"></div>
                </div>
            </div>
            <div id="cam-status">AWAITING FEED</div>
            <div id="emotion-label">EMOTIONAL STATE — <span id="emotion-text">NEUTRAL</span></div>
            <div id="emotion-bar"><div id="emotion-fill" style="width:50%"></div></div>
            <div id="neural-stats">
                <div>STM: <span class="stat-val" id="stat-stm">0</span></div>
                <div>LTM: <span class="stat-val" id="stat-ltm">0</span></div>
                <div>CYCLES: <span class="stat-val" id="stat-cycles">0</span></div>
                <div>EMOTION: <span class="stat-val" id="stat-emotion">0.50</span></div>
            </div>
        </div>

        <!-- Short Term Memory -->
        <div class="panel" id="stm-panel">
            <div class="panel-label">SHORT-TERM MEMORY</div>
            <div class="memory-list" id="stm-list"></div>
        </div>

        <!-- Long Term Memory -->
        <div class="panel" id="ltm-panel">
            <div class="panel-label">LONG-TERM MEMORY</div>
            <div class="memory-list" id="ltm-list"></div>
            <div style="display:flex; gap:6px; margin-top:8px; flex-shrink:0;">
                <button class="secondary" id="save-btn">EXPORT</button>
                <button class="secondary" id="load-btn">IMPORT</button>
                <button class="secondary" id="clear-ltm-btn">WIPE</button>
            </div>
        </div>
    </div>
</div>

<script src="entity.js"></script>
</body>
</html>
